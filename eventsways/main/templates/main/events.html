{% extends 'base.html' %}
{% load static %}

{% block content %}
<div id="overlay" style="display: none;"></div>
<section id="events">
  <aside class="filters">
    <div class="filters-inner">
      <div class="filters-close">
        <i class="fas fa-times fa-lg"></i>
      </div>
      <div class="view">
        <div class="view-inner">
          <button id="grid-events-btn" class="active-btn" data-flag="0" disabled><i class="fas fa-th"></i></button>
          <button id="list-events-btn" data-flag="1"><i class="fas fa-list"></i></button>
          <button id="map-events-btn" data-flag="2"><i class="fas fa-map-marked-alt"></i></button>
        </div>
      </div>
<!--Filtering date-->
    <form action="" method="get">
        {{ filter.form.events_holding_date }}

        {% for choice in filter.form.category %}
            {{ choice.tag }}  {{ choice.choice_label }}
        {% endfor %}

        <button type="submit">Find</button>
    </form>
    </div>
  </aside>

 

  <section class="allevents">
    <div class="container">
      <div class="events-filters-btn">
        <button class="btn btn-shadow">Фильтры</button>
      </div>
      <ul class="main-event-ul all-events-list">
    {% for event in filter.qs %}
          {% include 'main/includes/event_card_template.html' %}
    {% endfor %}
      </ul>
      <div class="mapbox mapOff">
        <div id="map"></div>
      </div>
    </div>

    <!--PAGINATION-->

    {% if is_paginated %}

    <nav aria-label="..." class="pagination-nav">
      <ul class="pagination flex-row">
        <li class="page-item {% if not prev_url %} disabled {% endif %}">
          <a class="page-link" href="{{ prev_url }}" tabindex="-1" aria-disabled="true">Пред</a>
        </li>

        {% for n in page_object.paginator.page_range %}

        {% if page_object.number == n %}
        <!-- Activ page -->
        <li class="page-item"><a class="page-link page-active" href="?page={{ n }}">{{ n }}</a></li>
        {% elif n > page_object.number|add:-3 and n < page_object.number|add:3 %}

        <li class="page-item"><a class="page-link" href="?page={{ n }}">{{ n }}</a></li>

        {% endif %}

        {% endfor %}

        <li class="page-item {% if not next_url %} disabled {% endif %}">
          <a class="page-link" href="{{ next_url }}">След</a>
        </li>
      </ul>
    </nav>
    {% endif %}

  </section>
</section>
<script src="{% static "events.bundle.js" %}"></script>

<script src="{% static "eventsMap.bundle.js" %}"></script>

{% endblock %}
</section>